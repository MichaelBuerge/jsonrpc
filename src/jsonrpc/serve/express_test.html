<!doctype html>
<html>
<body>
<script src="../../../node_modules/google-closure-library/closure/goog/base.js"></script>
<script src="../../../deps.js"></script>
<script>
goog.require('goog.Promise');
goog.require('goog.testing.jsunit');
goog.require('jsonrpc.Client');
goog.require('jsonrpc.XhrIoTransport')
</script>
<script>

// NOTE:
// The tests in this file perform real calls through XHR an are meant to be run
// through/against testing/express-server.js.
// They WON'T work when loaded as file-URL.


function testEcho() {
  var client = new jsonrpc.Client(new jsonrpc.XhrIoTransport('/jsonrpc'));
  return (
    client.call('echo', {'gna': 'fu'})
    .then(function(result) {
      assertObjectEquals({'gna': 'fu'}, result);
    })
  );
}

</script>
</body>
</html>
